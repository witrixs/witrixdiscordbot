# Правила повышения уровней

## От чего зависит уровень

Уровень считается по **трём вещам**:
1. **Количество сообщений** — сколько сообщений написал участник на сервере.
2. **Опыт (XP)** — начисляется за сообщения и за время на сервере.
3. **Дни на сервере** — сколько дней участник числится на сервере (бот раз в 24 часа добавляет +1 день).

---

## Уровни 1–5: только сообщения

До 5-го уровня уровень зависит **только от числа сообщений**. XP и дни пока не участвуют.

| Уровень | Нужно сообщений (всего) |
|--------|--------------------------|
| 1      | 0                        |
| 2      | 5                        |
| 3      | 15                       |
| 4      | 30                       |
| 5      | 50                       |

То есть: 5 сообщений → 2 уровень, 15 → 3, 30 → 4, 50 → 5.

---

## Уровень 5 и выше: сообщения + XP + дни

С 5-го уровня дальше уровень считается по **суммарному опыту**:

**Суммарный XP** = `XP` (из БД) + бонус за дни  
**Бонус за дни** = `(дни_на_сервере ÷ 2) × 15`  
То есть каждые **2 дня** на сервере дают **+15 XP** (раз в сутки бот прибавляет день и пересчитывает).

**Порог для уровня** (сколько всего нужно суммарного XP):
- уровень 5: 50  
- уровень 6: 50 + 600 = 650  
- уровень 7: 650 + 600 = 1250  
- уровень N (N ≥ 5): **50 + (N − 5) × 600**

Между соседними уровнями всегда **600 XP** суммарного опыта. Это не меняется ни на 6, ни на 300, ни на 500, ни на 700 уровне — формула одна: **50 + (N − 5) × 600** суммарного XP до уровня N.

Примеры порогов (всего суммарного XP нужно):
- уровень 300: 50 + 295×600 = **177 050**
- уровень 301: 50 + 296×600 = **177 650**
- уровень 302: 50 + 297×600 = **178 250**
- уровень 500: 50 + 495×600 = **297 050**
- уровень 700: 50 + 695×600 = **417 050**

С 301 на 302, с 501 на 502, с 701 на 702 — везде нужно набрать **ещё 600 XP** (разница между порогами соседних уровней всегда 600).

---

## Сколько нужно времени: 301 → 302 уровень

Чтобы поднять уровень с 301 на 302, нужно набрать **600 XP** суммарного опыта (сообщения + бонус за дни).

**Только сообщения:**  
1 сообщение = 10 XP → **60 сообщений** = 600 XP.

**Только время на сервере:**  
Каждые 2 дня = +15 XP → 600 ÷ 15 = 40 «двоек» дней → **80 дней** (если вообще не писать).

**Смешанно (примеры):**
- 30 сообщений (300 XP) + 40 «двоек» дней (300 XP) = 600 XP → **30 сообщений и ~80 дней**.
- 60 сообщений за день = 600 XP → **1 активный день** (если писать много).
- 10 сообщений в день = 100 XP/день → **6 дней** только чатом до 302.

Итого: с 301 на 302 — как и между любыми другими соседними уровнями 5+: **600 XP**, то есть примерно **60 сообщений** или **80 дней** только временем, или комбинация.

---

## Как набирается XP

1. **Сообщения**  
   За каждое своё сообщение в чате (не от бота):  
   - если уровень **≥ 5** — **+10 XP**;  
   - если уровень **< 5** — XP за сообщения не даётся (сначала нужно 50 сообщений до 5 уровня).

2. **Время на сервере**  
   Раз в **24 часа** бот добавляет участнику **+1 день** и пересчитывает бонус:  
   **+15 XP** за каждые **2 новых дня** (формула: `(дни ÷ 2) × 15` в расчёте уровня).

---

## Кратко

- **Уровни 1–5:** только число сообщений (0 → 5 → 15 → 30 → 50).
- **Уровень 5+:** уровень = по суммарному XP (сырой XP + бонус за дни).
- **XP дают:** сообщения (+10 XP за сообщение при уровне ≥ 5) и дни на сервере (+15 XP за каждые 2 дня).
- **Прогресс-бар в /level:** показывает долю текущего XP от порога следующего уровня (одна шкала с цифрами).

Уровень можно вручную менять в админ-панели (раздел «Пользователи»); тогда XP и дни остаются как есть, но отображаемый уровень и прогресс считаются по этим правилам от сохранённых значений.
